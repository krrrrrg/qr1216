restaurantForm.addEventListener("submit", async function (e) {
e.preventDefault(); // 필수 필드 검증 const name =
document.getElementById("storeName").value; const address =
document.getElementById("storeAddress").value; const category =
document.getElementById("storeCategory").value || "기타"; const phoneNumber =
document.getElementById("storePhone").value; // 필수 입력 검증 if (!name ||
!address || !phoneNumber) { alert("가게명, 주소, 전화번호는 필수 입력
항목입니다."); return; } const formData = { id: currentRestaurantId, name: name,
category: category, address: address, phoneNumber: phoneNumber, openTime:
document.getElementById("openTime").value, closeTime:
document.getElementById("closeTime").value, description:
document.getElementById("storeNotice").value, refLink:
document.getElementById("storeSns").value, ownerId: currentUser }; const method
= currentRestaurantId ? "PUT" : "POST"; const url = currentRestaurantId ?
`/api/owner/restaurants/${currentRestaurantId}` : "/api/owner/restaurants"; try
{ const token = document.querySelector("meta[name='_csrf']").content; const
header = document.querySelector("meta[name='_csrf_header']").content; const
response = await fetch(url, { method: method, headers: { "Content-Type":
"application/json", [header]: token }, body: JSON.stringify(formData) }); if
(!response.ok) { const errorData = await response.text(); throw new
Error(errorData || "레스토랑 저장에 실패했습니다."); } alert("레스토랑이
성공적으로 저장되었습니다."); await loadDashboardData(); if
(currentRestaurantId) { await loadRestaurantInfo(currentRestaurantId); } } catch
(error) { console.error("Error:", error); alert(error.message); } });
